{"ast":null,"code":"import * as L from 'leaflet';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class MarkerService {\n  constructor(http) {\n    this.http = http;\n    //capitals: string = '/assets/data/usa-capitals.geojson';\n    this.baseURL = \"http://localhost:11111/transmitters\";\n  }\n  // makeCapitalMarkers(map: L.Map): void {\n  //   this.http.get(this.capitals).subscribe((res: any) => {\n  //     for (const c of res.features) {\n  //      const lon = c.geometry.coordinates[0];\n  //     const lat = c.geometry.coordinates[1];\n  //     const marker = L.marker([lat, lon]);\n  //     marker.addTo(map);\n  //  }\n  // });\n  // }\n  makeTransmitterMarkers(map) {\n    this.http.get(this.baseURL).subscribe(res => {\n      const layerMarkers = L.layerGroup(); // Create a layer group to hold the markers\n      for (const t of res) {\n        const lon = t.tranSouradniceS;\n        const lat = t.tranSouradniceN;\n        const popupContent = t.name;\n        const imagePath = t.imagePath;\n        const customIcon = L.icon({\n          iconUrl: imagePath,\n          iconSize: [32, 32],\n          iconAnchor: [16, 32]\n        });\n        const marker = L.marker([lat, lon], {\n          icon: customIcon\n        });\n        marker.bindPopup(popupContent);\n        marker.addTo(layerMarkers); // Add the marker to the layer group\n      }\n\n      const layerControl = L.control.layers().addTo(map);\n      layerControl.addBaseLayer(layerMarkers, \"Vysilace\"); // Add the layer group to the layer control with a custom name\n    });\n  }\n\n  makeTransmitterCircleMarkers(map) {\n    this.http.get(this.baseURL).subscribe(res => {\n      const layerMarkers = L.layerGroup(); // Create a layer group to hold the markers\n      for (const t of res) {\n        const lon = t.tranSouradniceS;\n        const lat = t.tranSouradniceN;\n        const circle = L.circleMarker([lat, lon]);\n        //  circle.addTo(map);\n        circle.addTo(layerMarkers);\n      }\n      const layerControl = L.control.layers().addTo(map);\n      layerControl.addBaseLayer(layerMarkers, \"Signal\");\n    });\n  }\n}\nMarkerService.ɵfac = function MarkerService_Factory(t) {\n  return new (t || MarkerService)(i0.ɵɵinject(i1.HttpClient));\n};\nMarkerService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: MarkerService,\n  factory: MarkerService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["L","MarkerService","constructor","http","baseURL","makeTransmitterMarkers","map","get","subscribe","res","layerMarkers","layerGroup","t","lon","tranSouradniceS","lat","tranSouradniceN","popupContent","name","imagePath","customIcon","icon","iconUrl","iconSize","iconAnchor","marker","bindPopup","addTo","layerControl","control","layers","addBaseLayer","makeTransmitterCircleMarkers","circle","circleMarker","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Honza\\Desktop\\OOP\\projekty\\policieProjekt\\angular-leaflet\\src\\app\\marker.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport * as L from 'leaflet';\nimport { Transmitter } from 'src/Transmitter';\nimport { style } from '@angular/animations';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MarkerService {\n  //capitals: string = '/assets/data/usa-capitals.geojson';\n \n  private baseURL = \"http://localhost:11111/transmitters\";\n\n \n  constructor(private http: HttpClient) {\n  }\n \n \n\n // makeCapitalMarkers(map: L.Map): void {\n //   this.http.get(this.capitals).subscribe((res: any) => {\n //     for (const c of res.features) {\n  //      const lon = c.geometry.coordinates[0];\n   //     const lat = c.geometry.coordinates[1];\n   //     const marker = L.marker([lat, lon]);\n        \n   //     marker.addTo(map);\n    //  }\n   // });\n  \n // }\n makeTransmitterMarkers(map: L.Map): void {\n  this.http.get<Transmitter[]>(this.baseURL).subscribe((res: Transmitter[]) => {\n    const layerMarkers = L.layerGroup(); // Create a layer group to hold the markers\n    \n    for (const t of res) {\n      const lon = t.tranSouradniceS;\n      const lat = t.tranSouradniceN;\n      const popupContent = t.name;\n      const imagePath = t.imagePath;\n\n      const customIcon = L.icon({\n        iconUrl: imagePath,\n        iconSize: [32, 32],\n        iconAnchor: [16, 32]\n      });\n      const marker = L.marker([lat, lon], { icon: customIcon });\n      marker.bindPopup(popupContent);\n      marker.addTo(layerMarkers); // Add the marker to the layer group\n    }\n    \n    const layerControl = L.control.layers().addTo(map);\n    layerControl.addBaseLayer(layerMarkers, \"Vysilace\"); // Add the layer group to the layer control with a custom name\n  });\n}\n\nmakeTransmitterCircleMarkers(map:L.Map):void{\n  this.http.get<Transmitter[]>(this.baseURL).subscribe((res: Transmitter[]) => {\n    const layerMarkers = L.layerGroup(); // Create a layer group to hold the markers\n    for (const t of res) {\n      const lon = t.tranSouradniceS;\n      const lat = t.tranSouradniceN;\n      \n      const circle = L.circleMarker([lat, lon],);\n      \n    //  circle.addTo(map);\n      circle.addTo(layerMarkers);\n    }\n    const layerControl = L.control.layers().addTo(map);\n    layerControl.addBaseLayer(layerMarkers, \"Signal\");\n  });\n\n}\n\n}\n"],"mappings":"AAEA,OAAO,KAAKA,CAAC,MAAM,SAAS;;;AAQ5B,OAAM,MAAOC,aAAa;EAMxBC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IALxB;IAEQ,KAAAC,OAAO,GAAG,qCAAqC;EAIvD;EAID;EACA;EACA;EACC;EACC;EACA;EAEA;EACC;EACD;EAEF;EACAC,sBAAsBA,CAACC,GAAU;IAChC,IAAI,CAACH,IAAI,CAACI,GAAG,CAAgB,IAAI,CAACH,OAAO,CAAC,CAACI,SAAS,CAAEC,GAAkB,IAAI;MAC1E,MAAMC,YAAY,GAAGV,CAAC,CAACW,UAAU,EAAE,CAAC,CAAC;MAErC,KAAK,MAAMC,CAAC,IAAIH,GAAG,EAAE;QACnB,MAAMI,GAAG,GAAGD,CAAC,CAACE,eAAe;QAC7B,MAAMC,GAAG,GAAGH,CAAC,CAACI,eAAe;QAC7B,MAAMC,YAAY,GAAGL,CAAC,CAACM,IAAI;QAC3B,MAAMC,SAAS,GAAGP,CAAC,CAACO,SAAS;QAE7B,MAAMC,UAAU,GAAGpB,CAAC,CAACqB,IAAI,CAAC;UACxBC,OAAO,EAAEH,SAAS;UAClBI,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;UAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;SACpB,CAAC;QACF,MAAMC,MAAM,GAAGzB,CAAC,CAACyB,MAAM,CAAC,CAACV,GAAG,EAAEF,GAAG,CAAC,EAAE;UAAEQ,IAAI,EAAED;QAAU,CAAE,CAAC;QACzDK,MAAM,CAACC,SAAS,CAACT,YAAY,CAAC;QAC9BQ,MAAM,CAACE,KAAK,CAACjB,YAAY,CAAC,CAAC,CAAC;;;MAG9B,MAAMkB,YAAY,GAAG5B,CAAC,CAAC6B,OAAO,CAACC,MAAM,EAAE,CAACH,KAAK,CAACrB,GAAG,CAAC;MAClDsB,YAAY,CAACG,YAAY,CAACrB,YAAY,EAAE,UAAU,CAAC,CAAC,CAAC;IACvD,CAAC,CAAC;EACJ;;EAEAsB,4BAA4BA,CAAC1B,GAAS;IACpC,IAAI,CAACH,IAAI,CAACI,GAAG,CAAgB,IAAI,CAACH,OAAO,CAAC,CAACI,SAAS,CAAEC,GAAkB,IAAI;MAC1E,MAAMC,YAAY,GAAGV,CAAC,CAACW,UAAU,EAAE,CAAC,CAAC;MACrC,KAAK,MAAMC,CAAC,IAAIH,GAAG,EAAE;QACnB,MAAMI,GAAG,GAAGD,CAAC,CAACE,eAAe;QAC7B,MAAMC,GAAG,GAAGH,CAAC,CAACI,eAAe;QAE7B,MAAMiB,MAAM,GAAGjC,CAAC,CAACkC,YAAY,CAAC,CAACnB,GAAG,EAAEF,GAAG,CAAC,CAAE;QAE5C;QACEoB,MAAM,CAACN,KAAK,CAACjB,YAAY,CAAC;;MAE5B,MAAMkB,YAAY,GAAG5B,CAAC,CAAC6B,OAAO,CAACC,MAAM,EAAE,CAACH,KAAK,CAACrB,GAAG,CAAC;MAClDsB,YAAY,CAACG,YAAY,CAACrB,YAAY,EAAE,QAAQ,CAAC;IACnD,CAAC,CAAC;EAEJ;;AAhEaT,aAAa,C;mBAAbA,aAAa,EAAAkC,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;AAAbrC,aAAa,C;SAAbA,aAAa;EAAAsC,OAAA,EAAbtC,aAAa,CAAAuC,IAAA;EAAAC,UAAA,EAFZ;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}